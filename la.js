; (_ => {
	let hc = { '<': '&lt;', '&': '&amp;', "'": '&apos;', '"': '&quot;' }
    , he = x => x.replace(/[<&'"]/g, c => hc[c]) //html chars and escape fn
    , tcs = [
        ["1", "ğ„‡", "1"],
        ["2", "ğ„ˆ", "2"],
        ["3", "ğ„‰", "3"],
        ["4", "ğ„Š", "4"],
        ["5", "ğ„‹", "5"],
        ["6", "ğ„Œ", "6"],
        ["7", "ğ„", "7"],
        ["8", "ğ„", "8"],
        ["9", "ğ„", "9"],
        ["10", "ğ„", "10"],
        ["20", "ğ„‘", "20"],
        ["30", "ğ„’", "30"],
        ["40", "ğ„“", "40"],
        ["50", "ğ„”", "50"],
        ["60", "ğ„•", "60"],
        ["70", "ğ„–", "70"],
        ["80", "ğ„—", "80"],
        ["90", "ğ„˜", "90"],
        ["100", "ğ„™", "100"],
        ["200", "ğ„š", "200"],
        ["300", "ğ„›", "300"],
        ["400", "ğ„œ", "400"],
        ["500", "ğ„", "500"],
        ["600", "ğ„", "600"],
        ["700", "ğ„Ÿ", "700"],
        ["800", "ğ„ ", "800"],
        ["900", "ğ„¡", "900"],
        ["1000", "ğ„¢", "1000"],
        ["2000", "ğ„£", "2000"],
        ["3000", "ğ„¤", "3000"],
        ["4000", "ğ„¥", "4000"],
        ["5000", "ğ„¦", "5000"],
        ["6000", "ğ„§", "6000"],
        ["7000", "ğ„¨", "7000"],
        ["8000", "ğ„©", "8000"],
        ["9000", "ğ„ª", "9000"],
        ["10000", "ğ„«", "10000"],
        ["20000", "ğ„¬", "20000"],
        ["30000", "ğ„­", "30000"],
        ["40000", "ğ„®", "40000"],
        ["50000", "ğ„¯", "50000"],
        ["60000", "ğ„°", "60000"],
        ["70000", "ğ„±", "70000"],
        ["80000", "ğ„²", "80000"],
        ["90000", "ğ„³", "90000"],
        ["â‰ˆ Â¹â„â‚†", "ğ€", "â‰ˆ Â¹â„â‚†"],
        ["Â¹â„â‚ƒ", "ğ", "Â¹â„â‚ƒ"],
        ["Â¹â„â‚…", "ğ‚", "Â¹â„â‚…"],
        ["Â¹â„â‚„", "ğƒ", "Â¹â„â‚„"],
        ["Â¹â„â‚ˆ", "ğ„", "Â¹â„â‚ˆ"],
        ["â‰ˆ Â¹â„â‚†", "ğ…", "â‰ˆ Â¹â„â‚†"],
        ["Â¹â„â‚‚", "ğ†", "Â¹â„â‚‚"],
        ["Â³â„â‚„", "ğ•", "Â³â„â‚„"],
        ["Â¹â„â‚â‚†", "ğ‡", "Â¹â„â‚â‚†"],
        ["cum ğ™•", "ğŒ", "cum ğ™•"],
        [".3", "ğ", ".3"],
        ["â‰ˆ Â¹â„â‚„", "ğ", "â‰ˆ Â¹â„â‚„"],
        ["cum ğš¥ â‰ˆ Â¹â„â‚‚", "ğ", "cum ğš¥ â‰ˆ Â¹â„â‚‚"],
        ["OLE+U", "ğœ‹", "olive oil"],
        ["OLE+E", "ğœ", "olive oil"],
        ["DI", "ğ˜†", "DI"],
        ["TE", "ğ˜ƒ", "TE"],
        ["NI", "ğ˜", "figs"],
        ["JA+RU", "ğ›‘", "JA+RU"],
        ["VIR+[?]", "ğ™‡", "VIR+[?]"],
        ["OLE+KI", "ğœ“", "olive oil"],
        ["PA", "ğ˜‚", "PA"],
        ["*86+'*188'", "ğ›¥", "*86+'*188'"],
        ["VIN", "ğ™", "wine"],
        ["PAâ‚ƒ", "ğ˜°", "PAâ‚ƒ"],
        ["*301", "ğ™•", "*301"],
        ["TAâ‚‚", "ğ˜·", "TAâ‚‚"],
        ["KA", "ğ˜¾", "KA"],
        ["OLE+DI", "ğœ‰", "olive oil"],
        ["*304", "ğ™˜", "olive oil"],
        ["QA2+[?]+PU", "ğš»", "liquid?"],
        ["E", "ğ˜¡", "E"],
        ["*560", "ğ›¢", "*560"],
        ["*118", "ğ™ˆ", "talent"],
        ["CYP+E", "ğœš", "cyperus"],
        ["QA2+[?]+PU+RE", "ğš¼", "liquid?"],
        ["GRA", "ğ™‰", "grain"],
        ["OLE+MI", "ğœ—", "olive oil"],
        ["OLIV", "ğ™‹", "olives"],
        ["GRA+L4+L4", "ğ›¹", "GRA+L4+L4"],
        ["*188", "ğ™“", "*188"],
        ["WA", "ğ˜®", "cloth"],
        ["*188+KU", "ğœ‡", "*188+KU"],
        ["ZE", "ğ˜¼", "ZE"],
        ["GRA+QE", "ğ›±", "grain"],
        ["*21M", "ğ˜‘", "ram"],
        ["GRA+L2", "ğ›¸", "GRA+L2"],
        ["*330+DA", "ğœ£", "*330+DA"],
        ["CYP", "ğ™—", "cyperus"],
        ["*308", "ğ™œ", "olive oil"],
        ["OLE+NE", "ğœ", "olive oil"],
        ["OLE+TU", "ğœ–", "olive oil"],
        ["OLE+RI", "ğœ", "olive oil"],
        ["MI+JA+RU", "ğ›š", "liquid?"],
        ["QA2+[?]+RE", "ğš¹", "liquid?"],
        ["QA2+[?]+RE+PU", "ğšº", "liquid?"],
        ["SI+ME", "ğ›Š", "SI+ME"],
        ["*406VAS+KE", "ğœ®", "*406VAS+KE"],
        ["KI+MU", "ğ›–", "KI+MU"],
        ["*307", "ğ™›", "*307"],
        ["*86", "ğ™…", "*86"],
        ["RE", "ğ˜™", "RE"],
        ["VIN+WA", "ğ›¾", "wine"],
        ["SA", "ğ˜", "flax"],
        ["SI", "ğ˜¤", "SI"],
        ["VIN+WA", "ğ›½", "wine"],
        ["OLE+TA", "ğœ", "olive oil"],
        ["*23M", "ğ˜–", "bull"],
        ["*410-VS", "ğšª", "*410-VS"],
        ["*815", "ğš¢", "*815"],
        ["*401+*304", "ğœ«", "*401+*304"],
        ["E+KA", "ğ›†", "E+KA"],
        ["MI+JA+KA", "ğ›œ", "liquid?"],
        ["*305", "ğ™™", "*305"],
        ["*341+PI", "ğœ¦", "*341+PI"],
        ["PA3+QE", "ğ›", "PA3+QE"],
        ["MI+JA+I", "ğ››", "liquid?"],
        ["SA+MU+KU", "ğ›‚", "SA+MU+KU"],
        ["PU", "ğ˜«", "PU"],
        ["*326", "ğ™²", "*326"],
        ["A", "ğ˜‡", "A"],
        ["*403-VS", "ğš£", "*403-VS"],
        ["AU", "ğ™„", "pig"],
        ["CAP", "ğ˜’", "goat"],
        ["TELA+KU", "ğ›", "TELA+KU"],
        ["TELA+*312", "ğ›", "TELA+*312"],
        ["*414+A", "ğœ¯", "*414+A"],
        ["SI+SE", "ğ›‰", "SI+SE"],
        ["I", "ğ˜š", "I"],
        ["GRA+PA", "ğ›­", "grain"],
        ["OLE+KI", "ğœ’", "olive oil"],
        ["OLE+RA", "ğœ‘", "olive oil"],
        ["*318", "ğ™ª", "*318"],
        ["KU", "ğ™‚", "KU"],
        ["ğ«", "ğ«", "ğ«"],
        ["*370", "ğš", "*370"],
        ["*312", "ğ™¢", "*312"],
        ["KI", "ğ˜¸", "KI"],
        ["TU", "ğ˜¹", "TU"],
        ["*OLIV+TU", "ğ›º", "*OLIV+TU"],
        ["MI+JA+[ ]", "ğ›™", "liquid?"],
        ["GRA+KU", "ğ›²", "grain"],
        ["*330+SA", "ğœ¤", "*330+SA"],
        ["*79", "ğ™€", "*79"],
        ["*304+[ ]", "ğœœ", "*304+[ ]"],
        ["*307+*387", "ğœ ", "*307+*387"],
        ["GRA+K+L", "ğ›·", "grain"],
        ["GRA+B", "ğ›³", "grain"],
        ["VIR+KA", "ğ›§", "VIR+KA"],
        ["JU+*317+QE", "ğ›•", "JU+*317+QE"],
        ["VIR+*313a", "ğ›©", "VIR+*313a"],
        ["RE+SE", "ğš¿", "RE+SE"],
        ["DA+RE+SE", "ğš´", "DA+RE+SE"],
        ["*406-VS", "ğš¦", "*406-VS"],
        ["*343", "ğšƒ", "*343"],
        ["TI+A", "ğ›ƒ", "TI+A"],
        ["VIR+*313b", "ğ›ª", "VIR+*313b"],
        ["TA", "ğ˜³", "TA"],
        ["*516", "ğ›€", "*516"],
        ["*327", "ğ™³", "*327"],
        ["JU", "ğ˜¶", "flour"],
        ["OLE", "ğ™–", "olive oil"],
        ["DI+QE", "ğš¸", "DI+QE"],
        ["WI", "ğ˜£", "WI"],
        ["TE+RO[", "ğš·", "TE+RO["],
        ["*332", "ğ™¸", "*332"],
        ["GRA+H", "ğ›¶", "GRA+H"],
        ["*648", "ğœ§", "*648"],
        ["MA", "ğ™", "MA"],
        ["O", "ğ˜µ", "O"],
        ["GRA+BOSm", "ğ›¯", "grain"],
        ["SU", "ğ˜²", "SU"],
        ["*306+MI", "ğœ", "*306+MI"],
        ["TI", "ğ˜ ", "TI"],
        ["OLE+QE+DI", "ğœ˜", "olive oil"],
        ["*346", "ğš†", "*346"],
        ["GRA+F", "ğ›µ", "grain"],
        ["TWE", "ğ™†", "TWE"],
        ["VIR+*313c", "ğ›«", "VIR+*313c"],
        ["*904", "ğ™«", "*904"],
        ["*22F", "ğ˜“", "she-goat"],
        ["GRA+DA", "ğ›¬", "grain"],
        ["I+*301", "ğ›", "I+*301"],
        ["DA", "ğ˜€", "DA"],
        ["RO", "ğ˜", "RO"],
        ["*365", "ğš™", "*365"],
        ["*366", "ğšš", "*366"],
        ["*367", "ğš›", "*367"],
        ["*368", "ğšœ", "*368"],
        ["*369", "ğš", "*369"],
        ["CYP+D", "ğœ™", "cyperus"],
        ["SE", "ğ˜ˆ", "SE"],
        ["*323", "ğ™¯", "*323"],
        ["NE", "ğ˜—", "NE"],
        ["ME", "ğ˜‹", "ME"],
        ["VIN+RA", "ğœ€", "wine"],
        ["VINb+WI", "ğœ‚", "wine"],
        ["MU", "ğ˜•", "bovine"],
        ["*334", "ğ™º", "*334"],
        ["*306", "ğ™š", "*306"],
        ["*304+PA", "ğœ", "*304+PA"],
        ["CYP+K", "ğœ›", "cyperus"],
        ["*401+RU", "ğœ©", "*401+RU"],
        ["*336", "ğ™¼", "*336"],
        ["VIR+*307", "ğ›¨", "VIR+*307"],
        ["*131C", "ğ™", "vinegar"],
        ["*316+KI", "ğœ¡", "*316+KI"],
        ["DA+RO", "ğš³", "DA+RO"],
        ["*82", "ğ™ƒ", "*82"],
        ["*371", "ğšŸ", "*371"],
        ["*417-VS", "ğš±", "*417-VS"],
        ["*411-VS", "ğš«", "*411-VS"],
        ["*409-VS", "ğš©", "*409-VS"],
        ["*322", "ğ™®", "*322"],
        ["GAL", "ğ™”", "helmet"],
        ["*164", "ğ™", "textile?"],
        ["*301+*311", "ğœˆ", "*301+*311"],
        ["*337+*188", "ğœ¥", "*337+*188"],
        ["*86+*188", "ğ›¦", "*86+*188"],
        ["MI+*301", "ğ›", "liquid?"],
        ["*338", "ğ™¾", "boots?"],
        ["*408-VS", "ğš¨", "*408-VS"],
        ["QI", "ğ˜", "sheep"],
        ["SU+MI", "ğ›“", "SU+MI"],
        ["RAâ‚‚", "ğ˜½", "RAâ‚‚"],
        ["NA", "ğ˜…", "NA"],
        ["VIN+TE", "ğ›»", "wine"],
        ["*528", "ğ›ˆ", "*528"],
        ["GRA+E", "ğ›´", "GRA+E"],
        ["*47", "ğ˜¨", "*47"],
        ["HIDE+L", "ğœ†", "HIDE+L"],
        ["HIDE+SA+L", "ğœ„", "HIDE+SA+L"],
        ["HIDE+SA+B", "ğœƒ", "HIDE+SA+B"],
        ["HIDE+[?]", "ğ™’", "hide?"],
        ["HIDE+B", "ğœ…", "HIDE+B"],
        ["*413+SU", "ğœ²", "*413+SU"],
        ["*412+E", "ğœ°", "*412+E"],
        ["*659", "ğœ±", "*659"],
        ["*405+Î©", "ğœ­", "*405+Î©"],
        ["*402+A", "ğœ¬", "*402+A"],
        ["TI+*412VAS", "ğ›„", "TI+*412VAS"],
        ["*414+[ ]", "ğœ³", "*414+[ ]"],
        ["ğ", "ğ", "ğ"],
        ["â‰ˆ", "â‰ˆ", "â‰ˆ"],
        ["*316", "ğ™¨", "*316"],
        ["*563", "ğ›£", "*563"],
        ["*418+L2", "ğœ¶", "*418+L2"],
        ["*339", "ğ™¿", "*339"],
        ["*811", "ğ®", "*811"],
        ["CAPm+KU", "ğš¾", "CAPm+KU"],
        ["*21F", "ğ˜", "ewe"],
        ["*22M", "ğ˜”", "he-goat"],
        ["*320", "ğ™¬", "*320"],
        ["*328", "ğ™´", "*328"],
        ["JA", "ğ˜±", "JA"],
        ["PUâ‚‚", "ğ˜œ", "PUâ‚‚"],
        ["*800", "ğ ", "*800"],
        ["*171", "ğ™‘", "fodder?"],
        ["ZO", "ğ˜", "ZO"],
        ["JE", "ğ˜§", "3/4"],
        ["OLE+QIf", "ğœŒ", "olive oil"],
        ["OLE+KI+U", "ğœ”", "olive oil"],
        ["OLE+KI+ME", "ğœ•", "olive oil"],
        ["ZA", "ğ˜", "ZA"],
        ["VIN+RA", "ğ›¿", "wine"],
        ["VIN+KA", "ğœ", "wine"],
        ["QI+SI", "ğš½", "QI+SI"],
        ["*131B", "ğ™", "lesser quality wine"],
        ["DU", "ğ˜¬", "DU"],
        ["QE+GRA+PA", "ğ›Ÿ", "grain"],
        ["RU", "ğ˜˜", "RU"],
        ["*317", "ğ™©", "*317"],
        ["*809", "ğ¬", "*809"],
        ["MI", "ğ˜»", "liquid?"]
    ]
		, tc = {} //tab completions

	for (let i = 0; i < tcs.length; i++) tc[tcs[i][0]] = tcs[i][1]
	let lbh = '';
  for (let i = 0; i < tcs.length; i++) {
		lbh += '<b title="' + tcs[i][1] + '\n' + '-' + tcs[i][0] + ' <tab>' + '\n' + tcs[i][2] + '">' + tcs[i][1] + '</b>'
	}
	let d = document, el = d.createElement('div'); el.innerHTML =
		`<div class=ngn_lb><span class=ngn_x title=Close>â</span>${lbh}</div>
 <style>@font-face{font-family:"LinearA Sans Mono";src:local("LinearA Sans Mono"),url(NotoSansLinearA-LinearB.ttf)format('ttf');}</style>
 <style>
  .ngn_lb{position:fixed;top:0;left:0;right:0;background-color:#eee;color:#000;cursor:default;z-index:2147483647;
    font-family:"LinearA Sans Mono",monospace;border-bottom:solid #999 1px;padding:2px 2px 0 2px;word-wrap:break-word;}
  .ngn_lb b{cursor:pointer;padding:0 1px;font-weight:normal}
  .ngn_lb b:hover,.ngn_bq .ngn_lb{background-color:#777;color:#fff}
  .ngn_x{float:right;color:#999;cursor:pointer;margin-top:-3px}
  .ngn_x:hover{color:#f00}
 </style>`
	d.body.appendChild(el)
	let t, ts = [], lb = el.firstChild //t:textarea or input, lb:language bar
	let pd = x => x.preventDefault()
	let ev = (x, t, f, c) => x.addEventListener(t, f, c)
	ev(lb, 'mousedown', x => {
		if (x.target.classList.contains('ngn_x')) { lb.hidden = 1; upd(); pd(x); return }
		if (x.target.nodeName === 'B' && t) {
			let i = t.selectionStart, j = t.selectionEnd, v = t.value, s = x.target.textContent
      let l = s.length;
			if (i != null && j != null) { t.value = v.slice(0, i) + s + v.slice(j); t.selectionStart = t.selectionEnd = i + l }
			pd(x); return
		}
	})
	let fk = x => {
		let t = x.target
		if (!x.ctrlKey && !x.shiftKey && !x.altKey && !x.metaKey) {
			if (x.key == "Tab") {
				let i = t.selectionStart, v = t.value, gs = v.lastIndexOf('-'), c = tc[v.slice(gs+1, i)]  
        console.log(v,i,gs,c,v.slice(gs+1, i));
				if (c) { t.value = v.slice(0, gs) + c + v.slice(i); t.selectionStart = t.selectionEnd = i - 1; pd(x) }
			}
		}
	}
	let ff = x => {
		let t0 = x.target, nn = t0.nodeName.toLowerCase()
		if (nn !== 'textarea' && (nn !== 'input' || t0.type !== 'text' && t0.type !== 'search')) return
		t = t0; if (!t.ngn) { t.ngn = 1; ts.push(t); ev(t, 'keydown', fk) }
	}
	let upd = _ => { d.body.style.marginTop = lb.clientHeight + 'px' }
	upd(); ev(window, 'resize', upd)
	ev(d, 'focus', ff, !0); let ae = d.activeElement; ae && ff({ type: 'focus', target: ae })
})();
